document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll('a[href^="#"]');e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1),a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"start"})})});let t=document.querySelector(".navbar"),a=t?t.offsetHeight:0;window.addEventListener("scroll",function(){window.scrollY>a?t&&t.classList.add("scrolled"):t&&t.classList.remove("scrolled")});let n=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animated")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),o=document.querySelectorAll(".feature-card, .pricing-card, .step-item, .stat-item");o.forEach(e=>{n.observe(e)});let r=document.querySelector(".stats-section");if(r){let s=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(!function e(){let t=document.querySelectorAll(".stat-item h3");t.forEach(e=>{let t=e.textContent.replace(/[^\d]/g,"");if(t){let a=t/50,n=0,o=setInterval(()=>{(n+=a)>=t&&(n=t,clearInterval(o));let r=e.textContent.replace(/[\d,]/g,"");e.textContent=Math.floor(n).toLocaleString("fa-IR")+r},50)}})}(),s.unobserve(e.target))})},{threshold:.5});s.observe(r)}let i=document.querySelectorAll(".pricing-card");i.forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})});let l=document.querySelectorAll(".accordion-button");l.forEach(e=>{e.addEventListener("click",function(){let e=this.querySelector("i");e&&setTimeout(()=>{this.classList.contains("collapsed")?(e.classList.remove("fa-minus"),e.classList.add("fa-plus")):(e.classList.remove("fa-plus"),e.classList.add("fa-minus"))},100)})});let c=document.createElement("button");c.innerHTML='<i class="fas fa-chevron-up"></i>',c.className="back-to-top btn btn-primary",c.style.cssText=`
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: none;
        z-index: 1000;
        border: none;
        box-shadow: 0 4px 12px rgba(32, 178, 170, 0.3);
        transition: all 0.3s ease;
    `,document.body.appendChild(c),window.addEventListener("scroll",function(){window.scrollY>300?c.style.display="block":c.style.display="none"}),c.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});let d=document.querySelectorAll("form");function p(e,t="info"){let a=document.createElement("div");a.className=`notification notification-${t}`,a.innerHTML=`
            <div class="notification-content">
                <span class="notification-text">${e}</span>
                <button class="notification-close">&times;</button>
            </div>
        `,a.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${"success"===t?"#28a745":"error"===t?"#dc3545":"#20B2AA"};
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            z-index: 10000;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideInRight 0.3s ease-out;
        `,document.body.appendChild(a),setTimeout(()=>{a.style.animation="slideOutRight 0.3s ease-in",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},300)},5e3),a.querySelector(".notification-close").addEventListener("click",function(){a.style.animation="slideOutRight 0.3s ease-in",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},300)})}d.forEach(e=>{e.addEventListener("submit",function(e){e.preventDefault(),new FormData(this),p("پیام شما با موفقیت ارسال شد!","success")})});let f=document.querySelectorAll("img[data-src]"),$=new IntersectionObserver(function(e){e.forEach(e=>{if(e.isIntersecting){let t=e.target;t.src=t.dataset.src,t.classList.remove("lazy"),$.unobserve(t)}})});f.forEach(e=>{$.observe(e)});let u=document.querySelector(".navbar-toggler"),m=document.querySelector(".navbar-collapse");if(u&&m){u.addEventListener("click",function(){this.classList.toggle("active")});let h=m.querySelectorAll(".nav-link");h.forEach(e=>{e.addEventListener("click",function(){window.innerWidth<992&&(new bootstrap.Collapse(m,{hide:!0}),u.classList.remove("active"))})})}let y=null;function b(e){if(navigator.clipboard)navigator.clipboard.writeText(e).then(function(){p("متن کپی شد!","success")});else{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),p("متن کپی شد!","success")}}if(window.addEventListener("scroll",function(){null!==y&&clearTimeout(y),y=setTimeout(function(){},150)},{passive:!0}),"undefined"!=typeof bootstrap){let v=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));v.map(function(e){return new bootstrap.Tooltip(e)});let g=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));g.map(function(e){return new bootstrap.Popover(e)})}});const style=document.createElement("style");style.textContent=`
    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOutRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
    
    .navbar.scrolled {
        background-color: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(0,0,0,0.1);
    }
    
    .feature-card, .pricing-card, .step-item {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
    }
    
    .feature-card.animated, .pricing-card.animated, .step-item.animated {
        opacity: 1;
        transform: translateY(0);
    }
    
    .lazy {
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    .lazy.loaded {
        opacity: 1;
    }
    
    .back-to-top:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(32, 178, 170, 0.4);
    }
    
    .navbar-toggler.active .navbar-toggler-icon {
        transform: rotate(45deg);
    }
`,document.head.appendChild(style);
